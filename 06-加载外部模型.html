<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title></title>
	</head>
	<body>

	</body>
	<script src="js/three.js" type="text/javascript" charset="utf-8"></script>

	<script src="js/MTLLoader.js" type="text/javascript" charset="utf-8"></script>
	<script src="js/OBJMTLLoader.js" type="text/javascript" charset="utf-8"></script>

	<script src="js/controls/TrackballControls.js" type="text/javascript" charset="utf-8"></script>

	<!-- fps监控 -->
	<script src="https://cdn.bootcss.com/stats.js/r16/Stats.min.js"></script>
	<!-- 动画 -->
	<script src="https://cdn.bootcss.com/tween.js/r14/Tween.min.js"></script>
	<script src="js/three-adrian.js" type="text/javascript" charset="utf-8"></script>


	<script type="text/javascript">

	ThreeAdrian.init()
	ThreeAdrian.init_camera()
	ThreeAdrian.init_spotLight()
	// 绘制坐标系
	draw_coordinate()
	// 加载性能监控
	ThreeAdrian.stats()

	ThreeAdrian.init_renderScene()

	// var ball = ThreeAdrian.create_ball()
	Demo.load_3dfile()

	</script>
</html>
<!--

<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>

		<script src="js/three.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/loaders/OBJLoader.js" type="text/javascript" charset="utf-8"></script>

		<script src="js/controls/TrackballControls.js" type="text/javascript" charset="utf-8"></script>

		<script src="https://cdn.bootcss.com/stats.js/r16/Stats.min.js"></script>
		<script src="https://cdn.bootcss.com/tween.js/r14/Tween.min.js"></script>

		<title></title>
	</head>
	<style>
		body{
			margin: 0;
			overflow: hidden;
		}
		#percent {
		    position: absolute;
		    width: 200px;
		    height: 20px;
		    color: red;
		    text-align: center;
		    border: 1p;
		}
	</style>
	<body>
		<div id="percent"></div>
		<div id="WebGL-output">

		</div>
		<script>
			$(function(){
				//编辑代码处
				var scene = new THREE.Scene();//场景构建
				var camera = new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,0.1,1000);//相机构建
				var renderer = new THREE.WebGLRenderer();//渲染器构建
				renderer.setClearColor(0xEEEEEE);
				renderer.setSize(window.innerWidth,window.innerHeight);
				renderer.shadowMapEnabled = true;//激活阴影
				//构建一个坐标轴
				var axes = new THREE.AxisHelper(20);
				scene.add(axes);
				var planeGeometry = new THREE.PlaneGeometry(40,20);
				//var planeMaterial = new THREE.MeshBasicMaterial({color:0xcccccc});
				var planeMaterial = new THREE.MeshLambertMaterial({color:0xffffff});//转换对光源有渲染的材质
				var plane = new THREE.Mesh(planeGeometry,planeMaterial);
				plane.rotation.x = -0.5*Math.PI;
				plane.position.x = 15;
				plane.position.y = 0;
				plane.position.x = 0;
				scene.add(plane);
				plane.receiveShadow  = true;
				//添加灯光
				var spotLight = new THREE.SpotLight(0xffffff);
				spotLight.position.set(-10,20,10);
				spotLight.castShadow = true;
				scene.add(spotLight);
				//渲染视图视角
				camera.position.x = -30;
				camera.position.y = 20;
				camera.position.z = 30;
				camera.lookAt(scene.position)
				$("#WebGL-output").append(renderer.domElement)


				//创建控件并绑定在相机上
				trackballControls = new THREE.TrackballControls(camera);
				trackballControls.rotateSpeed = 1.0;
				trackballControls.zoomSpeed = 1.0;
				trackballControls.panSpeed = 1.0;
				trackballControls.noZoom=false;
				trackballControls.noPan=false;
				trackballControls.staticMoving = true;
				trackballControls.dynamicDampingFactor = 0.3;



				renderScene();
				function renderScene(){
					var clock = new THREE.Clock()
					var delta = clock.getDelta()
					trackballControls.update(delta)
					requestAnimationFrame(renderScene);
					renderer.render(scene,camera);
				}

				// THREE.MTLLoader is not a constructor

 // model

				 var onProgress = function(xhr) {
						 if (xhr.lengthComputable) {
								 var percentComplete = xhr.loaded / xhr.total * 100;
								 var percent = document.getElementById("percent");
								 percent.innerText = Math.round(percentComplete, 2) + '% 已经加载';
						 }
				 };
				 var onError = function(xhr) {};
				 // var mtlLoader = new THREE.MTLLoader();
				 // mtlLoader.setPath('受电柜/');
				 // mtlLoader.load('受电柜.mtl', function(materials) {
				 //
					// 	 materials.preload();

						 var objLoader = new THREE.OBJLoader();
						 // objLoader.setMaterials(materials);
						 objLoader.setPath('./models/pengjing/');
						 objLoader.load('file.obj', function(object) {

								 object.position.y = 0;
								 object.rotation.y = 0.5;
								 object.scale.set(0.05, 0.05, 0.05);
								 scene.add(object);

						 }, onProgress, onError);
				 // });





			})
		</script>

	</body>
</html> -->
